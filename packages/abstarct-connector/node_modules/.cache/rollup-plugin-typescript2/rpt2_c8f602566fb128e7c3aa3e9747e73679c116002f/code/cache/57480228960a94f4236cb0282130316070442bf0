{"code":"import { getAccount, getChainId } from '@meta-wallets-kit/utils';\r\nexport class AbstractConnector {\r\n    constructor() {\r\n        this.payload = null;\r\n        this.sendingInterface = 'EIP 1193';\r\n    }\r\n    async disconnect() {\r\n        this.payload = null;\r\n    }\r\n    async getAccount() {\r\n        if (!this.payload) {\r\n            return null;\r\n        }\r\n        const { account, sendingInterface } = await getAccount(this.payload.provider, this.sendingInterface);\r\n        this.sendingInterface = sendingInterface;\r\n        return account;\r\n    }\r\n    async getChainId() {\r\n        if (!this.payload) {\r\n            return null;\r\n        }\r\n        const { chainId, sendingInterface } = await getChainId(this.payload.provider, this.sendingInterface);\r\n        this.sendingInterface = sendingInterface;\r\n        return chainId;\r\n    }\r\n    getConnectionPayload() {\r\n        return this.payload;\r\n    }\r\n    subscribeConnectAccount(callback) {\r\n        const convertedCallback = (accounts) => callback(accounts[0]);\r\n        this.payload?.provider.on && this.payload.provider.on('accountsChanged', convertedCallback);\r\n        return {\r\n            unsubscribe: () => {\r\n                this.payload?.provider.removeListener &&\r\n                    this.payload.provider.removeListener('accountsChanged', convertedCallback);\r\n            },\r\n        };\r\n    }\r\n    subscribeChainId(callback) {\r\n        const convertedCallback = (chainId) => {\r\n            const convertedChainId = typeof chainId === 'string' ? parseInt(chainId, 16) : chainId;\r\n            if (Number.isNaN(convertedChainId)) {\r\n                throw new Error('ChainId is incorrect');\r\n            }\r\n            else {\r\n                callback(convertedChainId);\r\n            }\r\n        };\r\n        this.payload?.provider.on && this.payload.provider.on('chainChanged', convertedCallback);\r\n        return {\r\n            unsubscribe: () => {\r\n                this.payload?.provider.removeListener &&\r\n                    this.payload.provider.removeListener('chainChanged', convertedCallback);\r\n            },\r\n        };\r\n    }\r\n    subscribeDisconnect(callback) {\r\n        this.payload?.provider.on && this.payload.provider.on('disconnect', callback);\r\n        return {\r\n            unsubscribe: () => {\r\n                this.payload?.provider.removeListener &&\r\n                    this.payload.provider.removeListener('disconnect', callback);\r\n            },\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","references":["E:/metawallet/meta-wallets-kit/packages/types/dist/index.d.ts","E:/metawallet/meta-wallets-kit/packages/utils/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\"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\"}"}

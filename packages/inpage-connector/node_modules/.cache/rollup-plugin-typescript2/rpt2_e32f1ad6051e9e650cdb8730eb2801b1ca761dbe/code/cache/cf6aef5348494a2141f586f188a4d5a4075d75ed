{"code":"import { AbstractConnector } from '@meta-wallets-kit/abstract-connector';\r\nexport class InpageConnector extends AbstractConnector {\r\n    async connect() {\r\n        let provider = window.ethereum || window.web3?.currentProvider;\r\n        // edge case if Metamask and Coinbase extensions are both installed\r\n        if (Array.isArray(provider?.providers)) {\r\n            provider = provider.providers.find((x) => x.isMetaMask) || provider;\r\n        }\r\n        if (!provider) {\r\n            throw new Error('Web3 provider not found! Please install the Web3 extension (e.g. Metamask) or use the Web3 browser (e.g. TrustWallet on your mobile device).');\r\n        }\r\n        if (provider.enable) {\r\n            await provider.enable();\r\n        }\r\n        this.payload = {\r\n            provider,\r\n        };\r\n        return this.payload;\r\n    }\r\n    subscribeDisconnect(callback) {\r\n        return super.subscribeDisconnect((error) => {\r\n            const isRecoverableMetamaskDisconnection = this.payload?.provider?.isMetaMask && error?.code === 1013;\r\n            !isRecoverableMetamaskDisconnection && callback(error);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","references":["E:/metawallet/meta-wallets-kit/packages/abstarct-connector/dist/index.d.ts","E:/metawallet/meta-wallets-kit/packages/types/dist/index.d.ts","E:/metawallet/meta-wallets-kit/packages/inpage-connector/src/@types/extend-window.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,sCAAsC,CAAC;AAezE,MAAM,OAAO,eAAgB,SAAQ,iBAA0C;IACtE,KAAK,CAAC,OAAO;QAClB,IAAI,QAAQ,GAAmB,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,IAAI,EAAE,eAAe,CAAC;QAE/E,mEAAmE;QACnE,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE;YACtC,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAiB,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,QAAQ,CAAC;SACrF;QAED,IAAI,CAAC,QAAQ,EAAE;YACb,MAAM,IAAI,KAAK,CACb,8IAA8I,CAC/I,CAAC;SACH;QAED,IAAI,QAAQ,CAAC,MAAM,EAAE;YACnB,MAAM,QAAQ,CAAC,MAAM,EAAE,CAAC;SACzB;QAED,IAAI,CAAC,OAAO,GAAG;YACb,QAAQ;SACT,CAAC;QAEF,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAEM,mBAAmB,CAAC,QAA4B;QACrD,OAAO,KAAK,CAAC,mBAAmB,CAAC,CAAC,KAAW,EAAE,EAAE;YAC/C,MAAM,kCAAkC,GACtC,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE,UAAU,IAAI,KAAK,EAAE,IAAI,KAAK,IAAI,CAAC;YAC7D,CAAC,kCAAkC,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC;IACL,CAAC;CACF\"}"}

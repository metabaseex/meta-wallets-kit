{"version":3,"file":"connect-wallet-connector.cjs.development.js","sources":["../src/index.ts"],"sourcesContent":["/* eslint-disable import/no-duplicates */\r\nimport { AbstractConnector } from '@meta-wallets-kit/abstract-connector';\r\nimport { DefaultConnectionPayload } from '@meta-wallets-kit/types';\r\nimport type WalletConnectProvider from '@walletconnect/web3-provider';\r\nimport type { IWalletConnectProviderOptions } from '@walletconnect/types';\r\n\r\nexport type ConnectWalletConnectorConfig = IWalletConnectProviderOptions;\r\n\r\nexport interface ConnectWalletConnectionPayload extends DefaultConnectionPayload {\r\n  provider: WalletConnectProvider;\r\n}\r\n\r\nexport class ConnectWalletConnector extends AbstractConnector<ConnectWalletConnectionPayload> {\r\n  constructor(private config: ConnectWalletConnectorConfig) {\r\n    super();\r\n  }\r\n\r\n  public async connect(): Promise<ConnectWalletConnectionPayload> {\r\n    const WalletConnectLibrary = await import('@walletconnect/web3-provider');\r\n    const Provider = WalletConnectLibrary.default;\r\n    const provider = new Provider(this.config);\r\n\r\n    await provider.enable();\r\n\r\n    this.payload = {\r\n      provider,\r\n    };\r\n\r\n    return this.payload;\r\n  }\r\n\r\n  public async disconnect() {\r\n    if (this.payload) {\r\n      const walletConnector = await this.payload.provider.getWalletConnector({\r\n        disableSessionCreation: true,\r\n      });\r\n      await walletConnector.killSession();\r\n      await this.payload.provider.stop();\r\n    }\r\n    super.disconnect();\r\n  }\r\n}\r\n"],"names":["ConnectWalletConnector","_AbstractConnector","_inheritsLoose","config","_this","call","_proto","prototype","connect","_connect","_asyncToGenerator","_regeneratorRuntime","mark","_callee","WalletConnectLibrary","Provider","provider","wrap","_callee$","_context","prev","next","sent","enable","payload","abrupt","stop","apply","arguments","disconnect","_disconnect","_callee2","walletConnector","_callee2$","_context2","getWalletConnector","disableSessionCreation","killSession","AbstractConnector"],"mappings":"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"}
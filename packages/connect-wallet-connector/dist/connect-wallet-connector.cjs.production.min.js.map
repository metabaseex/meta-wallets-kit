{"version":3,"file":"connect-wallet-connector.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["/* eslint-disable import/no-duplicates */\r\nimport { AbstractConnector } from '@meta-wallets-kit/abstract-connector';\r\nimport { DefaultConnectionPayload } from '@meta-wallets-kit/types';\r\nimport type WalletConnectProvider from '@walletconnect/web3-provider';\r\nimport type { IWalletConnectProviderOptions } from '@walletconnect/types';\r\n\r\nexport type ConnectWalletConnectorConfig = IWalletConnectProviderOptions;\r\n\r\nexport interface ConnectWalletConnectionPayload extends DefaultConnectionPayload {\r\n  provider: WalletConnectProvider;\r\n}\r\n\r\nexport class ConnectWalletConnector extends AbstractConnector<ConnectWalletConnectionPayload> {\r\n  constructor(private config: ConnectWalletConnectorConfig) {\r\n    super();\r\n  }\r\n\r\n  public async connect(): Promise<ConnectWalletConnectionPayload> {\r\n    const WalletConnectLibrary = await import('@walletconnect/web3-provider');\r\n    const Provider = WalletConnectLibrary.default;\r\n    const provider = new Provider(this.config);\r\n\r\n    await provider.enable();\r\n\r\n    this.payload = {\r\n      provider,\r\n    };\r\n\r\n    return this.payload;\r\n  }\r\n\r\n  public async disconnect() {\r\n    if (this.payload) {\r\n      const walletConnector = await this.payload.provider.getWalletConnector({\r\n        disableSessionCreation: true,\r\n      });\r\n      await walletConnector.killSession();\r\n      await this.payload.provider.stop();\r\n    }\r\n    super.disconnect();\r\n  }\r\n}\r\n"],"names":["_AbstractConnector","ConnectWalletConnector","config","_this","call","_proto","prototype","connect","_connect","_asyncToGenerator","_regeneratorRuntime","mark","_callee","provider","wrap","_context","prev","next","Provider","sent","this","enable","payload","abrupt","stop","apply","arguments","disconnect","_disconnect","_callee2","walletConnector","_context2","getWalletConnector","disableSessionCreation","killSession","AbstractConnector"],"mappings":"ywOAYoCA,WAClC,SAAAC,EAAoBC,SAAoC,OACtDC,EAAAH,EAAAI,yBADkBF,EAAoCC,IADtBH,KAAAC,yEAGjC,IAAAI,EAAAJ,EAAAK,UAyBA,OAzBAD,EAEYE,mBAAO,IAAAC,EAAAC,EAAAC,IAAAC,MAAb,SAAAC,IAAA,IAAAC,EAAA,OAAAH,IAAAI,eAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAAA,OAAAF,EAAAE,OAC8B,qCAAO,qCAA+B,OAE/B,OAApCJ,EAAW,IADXK,EADoBH,EAAAI,cAEIC,KAAKlB,QAAOa,EAAAE,OAEpCJ,EAASQ,SAAQ,OAIrB,OAFFD,KAAKE,QAAU,CACbT,SAAAA,GACAE,EAAAQ,gBAEKH,KAAKE,SAAO,OAAA,UAAA,OAAAP,EAAAS,UAAAZ,YACpB,OAAA,WAAA,OAAAJ,EAAAiB,WAAAC,eAAArB,EAEYsB,sBAAU,IAAAC,EAAAnB,EAAAC,IAAAC,MAAhB,SAAAkB,IAAA,IAAAC,EAAA,OAAApB,IAAAI,eAAAiB,GAAA,cAAAA,EAAAf,KAAAe,EAAAd,MAAA,OAAA,IACDG,KAAKE,SAAOS,EAAAd,OAAA,MAAA,OAAAc,EAAAd,OACgBG,KAAKE,QAAQT,SAASmB,mBAAmB,CACrEC,wBAAwB,IACxB,OAFmB,OAAfH,EAAeC,EAAAZ,KAAAY,EAAAd,OAGfa,EAAgBI,cAAa,OAAA,OAAAH,EAAAd,OAC7BG,KAAKE,QAAQT,SAASW,OAAM,OAEpCxB,EAAAM,UAAMqB,WAAUvB,WAAG,OAAA,UAAA,OAAA2B,EAAAP,UAAAK,YACpB,OAAA,WAAA,OAAAD,EAAAH,WAAAC,eAAAzB,GA5ByCkC"}